
PREFIX cube: <https://cube.link/>
PREFIX sh: <http://www.w3.org/ns/shacl#>
PREFIX schema: <http://schema.org/>
PREFIX time: <http://www.w3.org/2006/time#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

SELECT ?observation
  ?costComponentLabel ?currencyLabel ?dataMethodLabel ?dataSourceLabel ?foreignTradeLabel ?keyIndicatorTypeLabel ?marketLabel ?productGroupLabel ?productSubgroupLabel ?productLabel ?productPropertiesLabel ?productionSystemLabel ?productOriginLabel ?salesRegionLabel ?unitLabel ?usageLabel ?valueChainDetailLabel ?valueChainLabel ?measure
  ?year ?month
WHERE {
  GRAPH <https://lindas.admin.ch/foag/agricultural-market-data> {
    
    VALUES(?lang) { ("de") } 
    FILTER (?product in ( <https://agriculture.ld.admin.ch/foag/product/142> ) )
FILTER (?valueChainDetail in ( <https://agriculture.ld.admin.ch/foag/value-chain-detail/1>,<https://agriculture.ld.admin.ch/foag/value-chain-detail/2> ) )
FILTER (?costComponent in ( <https://agriculture.ld.admin.ch/foag/cost-component/0>,<https://agriculture.ld.admin.ch/foag/cost-component/1>,<https://agriculture.ld.admin.ch/foag/cost-component/2> ) )
FILTER (?currency in ( <https://agriculture.ld.admin.ch/foag/currency/1> ) )
FILTER (?foreignTrade in ( <https://agriculture.ld.admin.ch/foag/foreign-trade/0> ) )
FILTER (?dataSource in ( <https://agriculture.ld.admin.ch/foag/data-source/1>,<https://agriculture.ld.admin.ch/foag/data-source/14>,<https://agriculture.ld.admin.ch/foag/data-source/15>,<https://agriculture.ld.admin.ch/foag/data-source/35>,<https://agriculture.ld.admin.ch/foag/data-source/36>,<https://agriculture.ld.admin.ch/foag/data-source/43>,<https://agriculture.ld.admin.ch/foag/data-source/62>,<https://agriculture.ld.admin.ch/foag/data-source/7> ) )
FILTER (?salesRegion in ( <https://agriculture.ld.admin.ch/foag/sales-region/0>,<https://agriculture.ld.admin.ch/foag/sales-region/1>,<https://agriculture.ld.admin.ch/foag/sales-region/11>,<https://agriculture.ld.admin.ch/foag/sales-region/14>,<https://agriculture.ld.admin.ch/foag/sales-region/15>,<https://agriculture.ld.admin.ch/foag/sales-region/3>,<https://agriculture.ld.admin.ch/foag/sales-region/4>,<https://agriculture.ld.admin.ch/foag/sales-region/5>,<https://agriculture.ld.admin.ch/foag/sales-region/6> ) )
FILTER (?usage in ( <https://agriculture.ld.admin.ch/foag/usage/0>,<https://agriculture.ld.admin.ch/foag/usage/5>,<https://agriculture.ld.admin.ch/foag/usage/6>,<https://agriculture.ld.admin.ch/foag/usage/9> ) )
FILTER (?productOrigin in ( <https://agriculture.ld.admin.ch/foag/product-origin/1> ) )
FILTER (?productProperties in ( <https://agriculture.ld.admin.ch/foag/product-properties/0> ) )
FILTER (?productionSystem in ( <https://agriculture.ld.admin.ch/foag/production-system/3>,<https://agriculture.ld.admin.ch/foag/production-system/0>,<https://agriculture.ld.admin.ch/foag/production-system/1>,<https://agriculture.ld.admin.ch/foag/production-system/2> ) )
FILTER (?dataMethod in ( <https://agriculture.ld.admin.ch/foag/data-method/3>,<https://agriculture.ld.admin.ch/foag/data-method/5> ) )
FILTER (?unit in ( <https://agriculture.ld.admin.ch/foag/unit/1> ) )
    <https://agriculture.ld.admin.ch/foag/cube/MilkDairyProducts/Production_Price_Year> cube:observationSet ?observationSet .
    ?observationSet cube:observation ?observation .
            ?observation <https://agriculture.ld.admin.ch/foag/dimension/cost-component> ?costComponent .
          optional { 
            ?costComponent schema:name ?costComponentLabel
            filter langMatches(lang(?costComponentLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/currency> ?currency .
          optional { 
            ?currency schema:name ?currencyLabel
            filter langMatches(lang(?currencyLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/data-method> ?dataMethod .
          optional { 
            ?dataMethod schema:name ?dataMethodLabel
            filter langMatches(lang(?dataMethodLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/data-source> ?dataSource .
          optional { 
            ?dataSource schema:name ?dataSourceLabel
            filter langMatches(lang(?dataSourceLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/date> ?date .
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/foreign-trade> ?foreignTrade .
          optional { 
            ?foreignTrade schema:name ?foreignTradeLabel
            filter langMatches(lang(?foreignTradeLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/key-indicator-type> ?keyIndicatorType .
          optional { 
            ?keyIndicatorType schema:name ?keyIndicatorTypeLabel
            filter langMatches(lang(?keyIndicatorTypeLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/market> ?market .
          optional { 
            ?market schema:name ?marketLabel
            filter langMatches(lang(?marketLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/product-group> ?productGroup .
          optional { 
            ?productGroup schema:name ?productGroupLabel
            filter langMatches(lang(?productGroupLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/product-subgroup> ?productSubgroup .
          optional { 
            ?productSubgroup schema:name ?productSubgroupLabel
            filter langMatches(lang(?productSubgroupLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/product> ?product .
          optional { 
            ?product schema:name ?productLabel
            filter langMatches(lang(?productLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/product-properties> ?productProperties .
          optional { 
            ?productProperties schema:name ?productPropertiesLabel
            filter langMatches(lang(?productPropertiesLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/production-system> ?productionSystem .
          optional { 
            ?productionSystem schema:name ?productionSystemLabel
            filter langMatches(lang(?productionSystemLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/product-origin> ?productOrigin .
          optional { 
            ?productOrigin schema:name ?productOriginLabel
            filter langMatches(lang(?productOriginLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/sales-region> ?salesRegion .
          optional { 
            ?salesRegion schema:name ?salesRegionLabel
            filter langMatches(lang(?salesRegionLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/unit> ?unit .
          optional { 
            ?unit schema:name ?unitLabel
            filter langMatches(lang(?unitLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/usage> ?usage .
          optional { 
            ?usage schema:name ?usageLabel
            filter langMatches(lang(?usageLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/value-chain-detail> ?valueChainDetail .
          optional { 
            ?valueChainDetail schema:name ?valueChainDetailLabel
            filter langMatches(lang(?valueChainDetailLabel), ?lang)
          }
      ?observation <https://agriculture.ld.admin.ch/foag/dimension/value-chain> ?valueChain .
          optional { 
            ?valueChain schema:name ?valueChainLabel
            filter langMatches(lang(?valueChainLabel), ?lang)
          }
    ?observation <https://agriculture.ld.admin.ch/foag/measure/price> ?measure .
  }

} ORDER BY ?year ?month

